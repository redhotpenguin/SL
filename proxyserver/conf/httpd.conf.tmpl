ServerRoot           {$httpd2_root}
ServerAdmin          fred@redhotpenguin.com
ServerSignature      Off
ServerTokens         Prod
PidFile              {$tmp_dir}/sl_proxyserver.pid
DocumentRoot         {$sl_root}/htdocs
TypesConfig          {$sl_root}/conf/mime.types
User                 {$sl_user}
Group                {$sl_group}
KeepAlive            On
MaxKeepAliveRequests 100
KeepAliveTimeout     15
MinSpareServers      24
MaxSpareServers      48
StartServers         64
#LogLevel             error
LogLevel             debug
MaxClients           128
ErrorLog             {$sl_root}/proxyserver/logs/httpd_error_log
TransferLog          {$sl_root}/proxyserver/logs/httpd_access_log
MaxRequestsPerChild  500
LogFormat "%h %l %u %t (%{User-agent}i) \"%r\" %>s %b"
UseCanonicalName     Off
HostNameLookups      Off
Timeout              30

<IfModule mod_proxy.c>
    # If mod_proxy is used for proxy forwarding
    ProxyRequests On
    Listen        8888
    <IfModule mod_cache.c>
        <IfModule mod_mem_cache.c>
        CacheEnable mem /
        MCacheSize 65536
        MCacheMaxObjectCount 1024
        MCacheMinObjectSize 1
        MCacheMaxObjectSize 4096
        </IfModule>
    </IfModule>
</IfModule>
<IfModule !mod_proxy.c>
    Listen 9000
</IfModule>

ServerName           herbert2
ErrorDocument        404	/404.html
ErrorDocument        500	/500.html

LoadModule apreq_module       modules/mod_apreq2.so
LoadModule perl_module        modules/mod_perl.so

PerlPassEnv SL_ROOT
PerlRequire "{$sl_root}/proxyserver/conf/startup.pl"
PerlSetVar data_root "{$sl_root}/data/"
PerlSetVar ad_url "{$ad_url}"

# Apache::Reload for development.
#PerlModule           Apache2::Reload
#PerlInitHandler      Apache2::Reload
#PerlSetVar           ReloadAll On
#PerlSetVar           ReloadDirectories "{$sl_root}/proxyserver/lib"
PerlSetVar           SLWhiteList Off
PerlSetVar           SLMethod Stacked
#PerlSetVar           SLMethod Container
PerlSetVar           SLCssUri {$sl_css_uri}

PerlPostReadRequestHandler Apache2::Const::OK
PerlMapToStorageHandler Apache2::Const::OK
PerlTransHandler SL::Apache::PerlTransHandler

<Location />
    SetHandler          modperl
    #PerlFixupHandler +Apache::DB
    PerlHeaderParserHandler Apache2::Const::OK
    PerlAccessHandler       Apache2::Const::OK
    PerlAuthenHandler       Apache2::Const::OK
    PerlAuthzHandler        Apache2::Const::OK
    PerlTypeHandler         Apache2::Const::OK
    PerlFixupHandler        Apache2::Const::OK
    PerlResponseHandler     SL::Apache 
</Location>

<Directory />
    AllowOverride None
</Directory>

Include {$sl_root}/conf/deflate.conf
